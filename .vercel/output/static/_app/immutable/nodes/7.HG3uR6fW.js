import{c as Je,l as Be}from"../chunks/CKfOPH6b.js";import{P as Le,g as Ve,an as Ye,h as de,ao as Ue,ap as we,aq as ze,a8 as Re,ai as he,o as J,ar as We,as as Ge,at as He,F as D,au as Ke,av as Qe,aw as Xe,a0 as Ze,p as et,ax as z,a7 as xe,ay as k,az as B,a as T,ae as q,b as C,d as tt,a3 as v,m as d,a1 as u,a4 as l,af as y,aA as W,a2 as N,aB as Ce,ag as at}from"../chunks/2Hr-knV9.js";import{a as $}from"../chunks/DiqNWaZ4.js";import{i as L}from"../chunks/BI5COxgk.js";import{e as Ne,i as $e}from"../chunks/CLwEBLnz.js";import{a as st,e as rt}from"../chunks/BF4TR07U.js";import{s as G,r as M,a as Ae}from"../chunks/BO9_AMe5.js";import{c as nt}from"../chunks/gmgPKwwS.js";var it="font-weight: bold",lt="font-weight: normal";function Ee(e){console.warn(`%c[svelte] state_snapshot_uncloneable
%c${e?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${e}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,it,lt)}const ct=[];function ot(e,n=!1,t=!1){if(!n){const a=[],s=V(e,new Map,"",a,null,t);if(a.length===1&&a[0]==="")Ee();else if(a.length>0){const i=a.length>10?a.slice(0,7):a.slice(0,10),f=a.length-i.length;let o=i.map(h=>`- <value>${h}`).join(`
`);f>0&&(o+=`
- ...and ${f} more`),Ee(o)}return s}return V(e,new Map,"",ct,null,t)}function V(e,n,t,a,s=null,i=!1){if(typeof e=="object"&&e!==null){var f=n.get(e);if(f!==void 0)return f;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Le(e)){var o=Array(e.length);n.set(e,o),s!==null&&n.set(s,o);for(var h=0;h<e.length;h+=1){var p=e[h];h in e&&(o[h]=V(p,n,`${t}[${h}]`,a,null,i))}return o}if(Ve(e)===Ye){o={},n.set(e,o),s!==null&&n.set(s,o);for(var A in e)o[A]=V(e[A],n,`${t}.${A}`,a,null,i);return o}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!i)return V(e.toJSON(),n,`${t}.toJSON()`,a,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return a.push(t),e}}const Pe=[...` 	
\r\f \v\uFEFF`];function ut(e,n,t){var a=e==null?"":""+e;if(t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var i=s.length,f=0;(f=a.indexOf(s,f))>=0;){var o=f+i;(f===0||Pe.includes(a[f-1]))&&(o===a.length||Pe.includes(a[o]))?a=(f===0?"":a.substring(0,f))+a.substring(o+1):f=o}}return a===""?null:a}function Te(e,n,t,a,s,i){var f=e.__className;if(de||f!==t||f===void 0){var o=ut(t,a,i);(!de||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=t}else if(i&&s!==i)for(var h in i){var p=!!i[h];(s==null||p!==!!s[h])&&e.classList.toggle(h,p)}return i}function H(e,n,t=n){var a=new WeakSet;Ue(e,"input",async s=>{e.type==="checkbox"&&we();var i=s?e.defaultValue:e.value;if(i=fe(e)?ve(i):i,t(i),J!==null&&a.add(J),await ze(),i!==(i=n())){var f=e.selectionStart,o=e.selectionEnd,h=e.value.length;if(e.value=i??"",o!==null){var p=e.value.length;f===o&&o===h&&p>h?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=f,e.selectionEnd=Math.min(o,p))}}}),(de&&e.defaultValue!==e.value||Re(n)==null&&e.value)&&(t(fe(e)?ve(e.value):e.value),J!==null&&a.add(J)),he(()=>{e.type==="checkbox"&&we();var s=n();if(e===document.activeElement){var i=We??J;if(a.has(i))return}fe(e)&&s===ve(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function fe(e){var n=e.type;return n==="number"||n==="range"}function ve(e){return e===""?null:+e}function K(e,n,t,a,s,i){Ge(n,()=>{var f=!1,o=He?.[D];he(()=>{if(!f){var[h,p]=nt(t);if(!p){var A=a(),E=!1,Q=he(()=>{E||h[A]});if(E=!0,Q.deps===null){var X=`${o}:${s}:${i}`;Ke(e,X),f=!0}}}})})}function ft(e,...n){return Re(()=>{try{let t=!1;const a=[];for(const s of n)s&&typeof s=="object"&&Qe in s?(a.push(ot(s,!0)),t=!0):a.push(s);t&&(Xe(e),console.log("%c[snapshot]","color: grey",...a))}catch{}}),n}m[D]="src/routes/select/+page.svelte";var vt=$(N('<div class="error-message svelte-18utmfh"> </div>'),m[D],[[107,3]]),dt=$(N('<p class="svelte-18utmfh"> </p>'),m[D],[[182,8]]),ht=$(N('<button type="button"><h3 class="svelte-18utmfh"> </h3> <!> <div class="bed-count svelte-18utmfh"> </div></button>'),m[D],[[174,6,[[180,7],[184,7]]]]),mt=$(N('<span class="unavailable-badge svelte-18utmfh">Unavailable</span>'),m[D],[[209,9]]),_t=$(N('<button type="button"><div class="bed-info svelte-18utmfh"><span class="bed-type svelte-18utmfh"> </span> <span class="bed-price svelte-18utmfh"> </span></div> <!></button>'),m[D],[[196,7,[[204,8,[[205,9],[206,9]]]]]]),pt=$(N('<section class="form-section svelte-18utmfh"><h2 class="svelte-18utmfh">Select Bed</h2> <div class="bed-list svelte-18utmfh"></div></section>'),m[D],[[192,4,[[193,5],[194,5]]]]),bt=$(N('<section class="form-section price-summary svelte-18utmfh"><h2 class="svelte-18utmfh">Price Summary</h2> <div class="price-details svelte-18utmfh"><div class="price-row svelte-18utmfh"><span>Nightly Rate:</span> <span> </span></div> <div class="price-row svelte-18utmfh"><span>Number of Nights:</span> <span> </span></div> <div class="price-row total svelte-18utmfh"><span>Total Estimated Cost:</span> <span> </span></div></div> <p class="price-note svelte-18utmfh">Pricing is based on bed type, room sharing, and length of stay to keep things fair for everyone.</p></section>'),m[D],[[219,4,[[220,5],[221,5,[[222,6,[[223,7],[224,7]]],[226,6,[[227,7],[228,7]]],[230,6,[[231,7],[232,7]]]]],[235,5]]]]),gt=$(N('<div class="select-page svelte-18utmfh"><div class="container svelte-18utmfh"><header class="svelte-18utmfh"><h1 class="svelte-18utmfh">Choose Your Room</h1></header> <!> <form method="POST" action="?/default"><section class="form-section svelte-18utmfh"><h2 class="svelte-18utmfh">Your Information</h2> <div class="form-group svelte-18utmfh"><label for="name" class="svelte-18utmfh">Full Name *</label> <input type="text" id="name" name="name" required placeholder="John Doe" class="svelte-18utmfh"/></div> <div class="form-group svelte-18utmfh"><label for="email" class="svelte-18utmfh">Email Address *</label> <input type="email" id="email" name="email" required placeholder="john@example.com" class="svelte-18utmfh"/></div></section> <section class="form-section svelte-18utmfh"><h2 class="svelte-18utmfh">Stay Dates</h2> <div class="date-inputs svelte-18utmfh"><div class="form-group svelte-18utmfh"><label for="checkIn" class="svelte-18utmfh">Check-in Date *</label> <input type="date" id="checkIn" name="checkInDate" required class="svelte-18utmfh"/></div> <div class="form-group svelte-18utmfh"><label for="checkOut" class="svelte-18utmfh">Check-out Date *</label> <input type="date" id="checkOut" name="checkOutDate" required class="svelte-18utmfh"/></div></div></section> <section class="form-section svelte-18utmfh"><h2 class="svelte-18utmfh">Select Room</h2> <div class="room-grid svelte-18utmfh"></div></section> <!> <!> <input type="hidden" name="roomId"/> <input type="hidden" name="bedId"/> <div class="form-actions svelte-18utmfh"><button type="submit" class="btn-primary svelte-18utmfh"> </button></div></form></div></div>'),m[D],[[100,0,[[101,1,[[102,2,[[103,3]]],[110,2,[[112,3,[[113,4],[114,4,[[115,5],[116,5]]],[125,4,[[126,5],[127,5]]]]],[139,3,[[140,4],[141,4,[[142,5,[[143,6],[144,6]]],[154,5,[[155,6],[156,6]]]]]]],[170,3,[[171,4],[172,4]]],[242,3],[243,3],[246,3,[[247,4]]]]]]]]]]);function m(e,n){Je(new.target),et(n,!0,m);let t={name:"",email:"",checkInDate:"",checkOutDate:"",roomId:null,bedId:null},a=z(W(null),"selectedRoom"),s=z(W(null),"priceCalculation"),i=z(W(!1),"isSubmitting"),f=z(W(null),"error");const o="2027-06-14",h="2027-06-21";function p(r){k(a,r,!0),t.roomId=r.id,t.bedId=null,E()}function A(r){t.bedId=r,E()}async function E(){if(!t.bedId||!t.checkInDate||!t.checkOutDate){k(s,null);return}try{const r=(await Ce(fetch("/api/calculate-price",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bedId:t.bedId,checkInDate:t.checkInDate,checkOutDate:t.checkOutDate})})))(),c=(await Ce(r.json()))();c.ok&&k(s,c.data,!0)}catch(r){console.error(...ft("error","Price calculation error:",r))}}function Q({cancel:r}){if(!t.name||!t.email||!t.bedId||!t.checkInDate||!t.checkOutDate){r(),k(f,"Please fill in all required fields");return}if(!d(s)){r(),k(f,"Please select dates to calculate price");return}k(i,!0),k(f,null)}xe(()=>{t.checkInDate&&t.checkOutDate&&E()}),xe(()=>{n.form&&(n.form.error?(k(f,n.form.error,!0),k(i,!1)):(B(n.form.status,200)||B(n.form.status,303))&&k(i,!1))});var X={...Be()},Z=gt(),me=u(Z),_e=v(u(me),2);{var qe=r=>{var c=vt(),b=u(c,!0);l(c),q(()=>y(b,d(f))),C(r,c)};T(()=>L(_e,r=>{d(f)&&r(qe)}),"if",m,106,2)}var ee=v(_e,2),te=u(ee),ae=v(u(te),2),pe=v(u(ae),2);M(pe),K("bind:value={formData.name}",[],()=>t,()=>"name",120,6),l(ae);var be=v(ae,2),ge=v(u(be),2);M(ge),K("bind:value={formData.email}",[],()=>t,()=>"email",131,6),l(be),l(te);var se=v(te,2),ke=v(u(se),2),re=u(ke),Y=v(u(re),2);M(Y),G(Y,"min",o),G(Y,"max",h),K("bind:value={formData.checkInDate}",[],()=>t,()=>"checkInDate",148,7),l(re);var ye=v(re,2),U=v(u(ye),2);M(U),G(U,"min",o),G(U,"max",h),K("bind:value={formData.checkOutDate}",[],()=>t,()=>"checkOutDate",160,7),l(ye),l(ke),l(se);var ne=v(se,2),De=v(u(ne),2);T(()=>Ne(De,21,()=>n.data.rooms,$e,(r,c)=>{var b=ht();let O;b.__click=()=>p(d(c));var _=u(b),g=u(_,!0);l(_);var I=v(_,2);{var w=S=>{var P=dt(),F=u(P,!0);l(P),q(()=>y(F,d(c).description)),C(S,P)};T(()=>L(I,S=>{d(c).description&&S(w)}),"if",m,181,7)}var x=v(I,2),R=u(x);l(x),l(b),q(()=>{O=Te(b,1,"room-card svelte-18utmfh",null,O,{selected:B(d(a)?.id,d(c).id)}),y(g,d(c).name),y(R,`${d(c).beds.length??""} bed${B(d(c).beds.length,1,!1)?"s":""} available`)}),C(r,b)}),"each",m,173,5),l(De),l(ne);var Ie=v(ne,2);{var Me=r=>{var c=pt(),b=v(u(c),2);T(()=>Ne(b,21,()=>d(a).beds,$e,(O,_)=>{var g=_t();let I;g.__click=()=>A(d(_).id);var w=u(g),x=u(w),R=u(x,!0);l(x);var S=v(x,2),P=u(S);l(S),l(w);var F=v(w,2);{var oe=j=>{var ue=mt();C(j,ue)};T(()=>L(F,j=>{d(_).isAvailable||j(oe)}),"if",m,208,8)}l(g),q((j,ue)=>{I=Te(g,1,"bed-option svelte-18utmfh",null,I,{selected:B(t.bedId,d(_).id),unavailable:!d(_).isAvailable}),g.disabled=!d(_).isAvailable,y(R,j),y(P,`$${ue??""}/night`)},[()=>d(_).bedType.toUpperCase(),()=>d(_).nightlyRate.toFixed(2)]),C(O,g)}),"each",m,195,6),l(b),l(c),C(r,c)};T(()=>L(Ie,r=>{d(a)&&r(Me)}),"if",m,191,3)}var Se=v(Ie,2);{var Fe=r=>{var c=bt(),b=v(u(c),2),O=u(b),_=v(u(O),2),g=u(_);l(_),l(O);var I=v(O,2),w=v(u(I),2),x=u(w,!0);l(w),l(I);var R=v(I,2),S=v(u(R),2),P=u(S);l(S),l(R),l(b),at(2),l(c),q((F,oe)=>{y(g,`$${F??""}`),y(x,d(s).nights),y(P,`$${oe??""}`)},[()=>d(s).nightlyRate.toFixed(2),()=>d(s).totalPrice.toFixed(2)]),C(r,c)};T(()=>L(Se,r=>{d(s)&&r(Fe)}),"if",m,218,3)}var ie=v(Se,2);M(ie);var le=v(ie,2);M(le);var Oe=v(le,2),ce=u(Oe),je=u(ce,!0);return l(ce),l(Oe),l(ee),st(ee,(r,c)=>rt?.(r,c),()=>Q),l(me),l(Z),q(()=>{Ae(ie,t.roomId||""),Ae(le,t.bedId||""),ce.disabled=d(i)||!d(s),y(je,d(i)?"Submitting...":"Submit Selection")}),H(pe,function(){return t.name},function(c){t.name=c}),H(ge,function(){return t.email},function(c){t.email=c}),H(Y,function(){return t.checkInDate},function(c){t.checkInDate=c}),H(U,function(){return t.checkOutDate},function(c){t.checkOutDate=c}),C(e,Z),tt(X)}Ze(["click"]);export{m as component};
